# ----------------------------------------------------
# Helm chart to install IBM storage Enabler for Containers.
# ----------------------------------------------------

images:
  ubiquity: ibmcom/ibm-storage-enabler-for-containers:2.0.0
  ubiquitydb: ibmcom/ibm-storage-enabler-for-containers-db:2.0.0
  provisioner: ibmcom/ibm-storage-dynamic-provisioner-for-kubernetes:2.0.0
  flex: ibmcom/ibm-storage-flex-volume-for-kubernetes:2.0.0

## IBM Storage Enabler for Containers supports one of the following backend types: spectrumConnect OR spectrumScale.
## Select a backend that you intend to use and comment out the other backend section.
spectrumConnect:
  connectionInfo:
    ## IP\FQDN and port of Spectrum Connect server.
    fqdn:
    port:

    ## Username and password defined for IBM Storage Enabler for Containers interface in Spectrum Connect.
    username:
    password:

  backendConfig:
    # A prefix for any new volume created on the storage system.
    instanceName:
    # Default Spectrum Connect storage service to be used, if not specified by the storage class.
    DefaultStorageService:

    newVolumeDefaults:
      # The fstype of a new volume if not specified by the user in the storage class.
      # File system type. Allowed values: ext4 or xfs.
      fsType: ext4
      # The default volume size (in GB) if not specified by the user when creating a new volume.
      size: 1

    dbPvConfig:
      # Ubiquity database PV name. For Spectrum Virtualize and Spectrum Accelerate, use default value "ibm-ubiquity-db".
      # For DS8000 Family, use "ibmdb" instead and make sure UBIQUITY_INSTANCE_NAME_VALUE value length does not exceed 8 chars.
      ubiquityDbPvName: ibm-ubiquity-db

      storageClassForDbPv:
        # Parameters to create the first Storage Class that is also to be used by Ubiquity for ibm-ubiquity-db PVC.
        # Note: The reclaimPolicy by default is Delete. Can be changed manually if needed.
        storageClassName:

        ## Set StorageClass as the default StorageClass. Ignored if storageClass.create is false.
        defaultClass: false

        params:
          # Storage Class profile parameter must point to the Spectrum Connect storage service name.
          spectrumConnectServiceName:
          # Storage Class file-system type. Allowed values: ext4 or xfs.
          fsType: ext4

## IBM storage Enabler for Containers supports two backend types: spectrumConnect OR spectrumScale.
## Select a backend that you intend to use and comment out the other backend section.
#spectrumScale:
#  connectionInfo:
#    # IP\FQDN and port of Spectrum Scale RESTful API server.
#    fqdn:
#    port:
#
#    # Username and password defined for IBM Storage Enabler for Containers interface in Spectrum Scale.
#    username:
#    password:
#
#  backendConfig:
#    # Default Spectrum Scale filesystem to be used.
#    defaultFilesystemName:
#
#    dbPvConfig:
#      ubiquityDbPvName: ibm-ubiquity-db
#
#      storageClassForDbPv:
#        # Parameters to create the first Storage Class that is also to be used by Ubiquity for ibm-ubiquity-db PVC.
#        # Note: The reclaimPolicy by default is Delete. Can be changed manually if needed.
#        storageClassName:
#
#        ## Set StorageClass as the default StorageClass. Ignored if storageClass.create is false
#        defaultClass: false



genericConfig:
  connectionInfo:
    # SSL verification mode. Allowed values: require (no validation is required) and verify-full (user-provided certificates). SSL mode is set for communication between [flex||provisioner]<->ubiquity<->[SpectrumConnect||SpectrumScale].
    sslMode: require

  # The IP address of the Ubiquity service object.
  # Update this key manually if the Ubiqutiy service object IP was changed.
  ubiquityIpAddress:

  logging:
    # Log level. Allowed values: debug, info, error.
    logLevel: info
    # Flex log directory. If the default setting is changed, make sure the new path exists on all the nodes and update the Flex DaemonSet hostpath accordingly.
    flexLogDir: /var/log

  ubiquityDbCredentials:
    # Username and password for the deployment of ubiquity-db database. Note: Do not use the "postgres" username, because it already exists.
    username:
    password:

  ## Optional: set the node selector of the ubiqutiy-db deployment.
  #ubiquityDbNodeSelector:
